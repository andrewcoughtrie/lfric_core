This "example" directory contains a configuration file that enables
you to run lfric_atm from the command line. This directory and example
directories for the other LFRic applications within the LFRic code
repository are colloquially called "canned" configurations as they are
designed to be run from the command line straight out of the can
without needing to run the Rose Stem application.

To run them without using Rose Stem, check out a working copy of a
branch. Then:

$ cd r12345_workingCopy/lfric_atm 
$ make build ;# Builds lfric_atm and copies it to bin directory
<snip lots of output>
$ cd example
$ ../bin/lfric_atm configuration.nml ;# Runs lfric_atm with the configuration file as input

To ensure canned configurations are kept up to date with changes to
the application, the Rose Stem developer test suite tests the canned
configurations to ensure they run to completion without errors.

configuration.nml
----------------- 

This file holds the application configuration. It configures a "single
column" run of lfric_atm. It is configured to use the mesh file in
this directory which is, in reality, not a single column mesh, but a
2x2 biperiodic mesh. However, the configuration is designed in such a
way as each column is computed independently from the other columns
and, in fact, gives identical results for each column. 

The configuration was originally copied from the Rose Stem
"run_lfric_atm_scm_gal9_bomex" configuration. Note that the Rose Stem version
may have diverged from this configuration as the two are not actively
kept in line.

As this configuration is tested routinely with the Intel compiler, it
is always expected to successfully run to completion. Note that it
should be run single-threaded as lfric_atm does not currently support
running with OpenMP. In practice, it means that either the lfric_atm
executable must be built without applying OpenMP transformations
(which is the default) or the application should be run with a single
thread, such as by setting the environment variable OMP_NUM_THREADS=1.

To run a global configuration
-----------------------------

If you wish to run a global configuration, you can create a
configuration based on one of the Rose Stem configurations. The
easiest way to do this is to run the Rose Stem developer test suite
and then use the contents of one of the run directories that are generated by the suite.

Each such directory should contain a configuration.nml file, an
iodef.xml file, a start dump file, a mesh file and, potentially, a
directory of data files. These files are required to run the
application. Assuming the Rose Stem test passed, the directory will
contain various netCDF output files, and text output files from the
model and from XIOS.

For example, the current form of the name for a short aquaplanet
configuration using a C12 cubed sphere mesh is:

~/cylc-run/[your-branch-name]-lfric_atm-meto-spice-developer/work/1/run_lfric_atm_aquaplanet_short_C12_dt-300p0_intel_64-bit_fast-debug
