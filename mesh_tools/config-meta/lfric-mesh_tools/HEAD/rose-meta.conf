[mesh]
ns=namelist/Mesh
compulsory=true
title=Mesh generator
sort-key=a01

[mesh=class]
compulsory=true
sort-key=
values=Bi-periodic, Cubed-sphere
trigger=namelist:biperiodic_mesh_generator:  Bi-periodic ;
       =file:biperiodic.nml:                 Bi-periodic ;
       =namelist:cubedsphere_mesh_generator: Cubed-sphere ;
       =file:cubedsphere.nml:                Cubed-sphere ;

[file:biperiodic.nml]
compulsory=true


[file:cubedsphere.nml]
compulsory=true


[namelist:biperiodic_mesh_generator]
compulsory=true
ns=namelist/Mesh/biperiodic
title=Bi-Periodic Mesh
sort-key=a01

[namelist:biperiodic_mesh_generator=mesh_filename]
compulsory=true
description=Filename of ugrid file to write Bi-Periodic mesh data to.
!kind=filename
type=character
sort-key=a02

[namelist:biperiodic_mesh_generator=nmeshes]
compulsory=true
description=Number of Bi-periodic meshes to produce.
!kind=default
help=If multiple meshes are requested ----something on how maps are created and configuration 
type=integer
range=1:
fail-if=this < 1
sort-key=a03

[namelist:biperiodic_mesh_generator=mesh_names]
!bounds=namelist:biperiodic_mesh_generator=nmeshes
compulsory=true
description=Name(s) to assign mesh(es).
help=These mesh names are used as variable names to identify
    =meshes in UGRID conformant, NetCDF output file.
!kind=default
type=character
length=:
fail-if=len(this) < 1 ;
        len(this) != namelist:biperiodic_mesh_generator=nmeshes ;
        len(this) != len(namelist:biperiodic_mesh_generator=edge_cells_x) ;
        len(this) != len(namelist:biperiodic_mesh_generator=edge_cells_y)
sort-key=a04

[namelist:biperiodic_mesh_generator=edge_cells_x]
!bounds=namelist:biperiodic_mesh_generator=nmeshes
compulsory=true
description=Number of edges cells in x-axis for each mesh.
help= min number of cells = 2, must be factor of previous edge cells for map creation
!kind=default
type=integer
length=:
range=2:
fail-if= this < 2 ;
        len(this) != namelist:biperiodic_mesh_generator=nmeshes ;
        len(this) != len(namelist:biperiodic_mesh_generator=mesh_names) ;
        len(this) != len(namelist:biperiodic_mesh_generator=edge_cells_y)
sort-key=a05

[namelist:biperiodic_mesh_generator=edge_cells_y]
!bounds=namelist:biperiodic_mesh_generator=nmeshes
compulsory=true
description=Number of edges cells in y-axis for each mesh.
help= min number of cells = 2, must be factor of previous edge cells for map creation
!kind=default
type=integer
length=:
range=2:
fail-if= this < 2 ;
        len(this) != namelist:biperiodic_mesh_generator=nmeshes ;
        len(this) != len(namelist:biperiodic_mesh_generator=mesh_names) ;
        len(this) != len(namelist:biperiodic_mesh_generator=edge_cells_x)
sort-key=a06


[namelist:biperiodic_mesh_generator=domain_x]
compulsory=true
description=Domain size (x-direction)
help=Grid domain size of mesh in x-direction, for even numbers of cells in x,
    =the mesh will be centred on y=0.0m. The same domain size will be applied
    =to requested meshes.
!kind=default
type=real
range=0.0:
fail-if= this < 0
sort-key=a07

[namelist:biperiodic_mesh_generator=domain_y]
compulsory=true
description=Domain size (y-direction)
help=Grid domain size of mesh in y-direction, for even numbers of cells in y,
    =the mesh will be centred on x=0.0m. The same domain size will be applied
    =to requested meshes.
!kind=default
type=real
range=0.0:
fail-if= this < 0
sort-key=a08



[namelist:cubedsphere_mesh_generator]
compulsory=true
ns=namelist/Mesh/cubedsphere
title=Cubed-Sphere Mesh
sort-key=b01

[namelist:cubedsphere_mesh_generator=mesh_filename]
compulsory=true
description=Filename of ugrid file to write cubed-sphere mesh data to.
!kind=filename
type=character
sort-key=b02

[namelist:cubedsphere_mesh_generator=nmeshes]
compulsory=true
description=Number of cubed-sphere meshes to produce.
help=If multiple meshes are requested ----something on how maps are created and configuration 
!kind=default
type=integer
range=1:
fail-if=this < 1
sort-key=b03


[namelist:cubedsphere_mesh_generator=mesh_names]
!bounds=namelist:cubedsphere_mesh_generator=nmeshes
compulsory=true
description=Name(s) to assign mesh(es).
help=These mesh names are used as variable names to identify
    =meshes in UGRID conformant, NetCDF output file.
type=character
length=:
fail-if = len(this) < 1 ;
          len(this) != namelist:cubedsphere_mesh_generator=nmeshes ;
          len(this) != len(namelist:cubedsphere_mesh_generator=edge_cells) ;
sort-key=b04

[namelist:cubedsphere_mesh_generator=edge_cells]
!bounds=namelist:cubedsphere_mesh_generator=nmeshes
compulsory=true
description=Number of edge cells per mesh panel
help=Cells on a panel edge, Cubed-Sphere is made up of 6 rectangular
    =panels with equal numbers of cells on each panels edge.
!kind=default
type=integer
length=:
range=3:
fail-if= this < 3 ;
         len(this) != namelist:cubedsphere_mesh_generator=nmeshes ;
         len(this) != len(namelist:cubedsphere_mesh_generator=mesh_names) ;
sort-key=b05

[namelist:cubedsphere_mesh_generator=smooth_passes]
compulsory=true
description=Number of smoothing iterations
help=Smoothing is only applied the highest resolution mesh in a run configuration.
!kind=default
type=integer
range=0:
fail-if= this < 0
sort-key=b06









